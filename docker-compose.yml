
version: '3'
services:
   app-master:
    build:
      context: ./Master
    volumes:
      - ./output:/Master/output
      - ./configuration.json:/Master/constants/configuration.json
    environment:
      - TZ=Europe/Rome
    networks:
      - my-network
   app-mapper-1:
    build:
      context: ./Mapper
    ports:
      - "9001:9001"  # Assegna porte univoche ai Mapper
      - "50001:50001"  # Porta univoca per servizio di HeartBeat
    environment:
      - TZ=Europe/Rome
      - MAPPER_PORT=9001
      - HB_PORT=50001
    networks:
      - my-network

   app-mapper-2:
    build:
      context: ./Mapper
    ports:
      - "9002:9002"  # Assegna porte univoche ai Mapper
      - "50002:50002"  # Porta univoca per servizio di HeartBeat
    environment:
      - TZ=Europe/Rome
      - MAPPER_PORT=9002
      - HB_PORT=50002
    networks:
      - my-network

   app-mapper-3:
    build:
      context: ./Mapper
    ports:
      - "9003:9003"  # Assegna porte univoche ai Mapper
      - "50003:50003"  # Porta univoca per servizio di HeartBeat
    environment:
      - TZ=Europe/Rome
      - MAPPER_PORT=9003
      - HB_PORT=50003
    networks:
      - my-network

   app-mapper-4:
    build:
      context: ./Mapper
    ports:
      - "9004:9004"  # Assegna porte univoche ai Mapper
      - "50004:50004"  # Porta univoca per servizio di HeartBeat
    environment:
      - TZ=Europe/Rome
      - MAPPER_PORT=9004
      - HB_PORT=50004
    networks:
      - my-network

   app-reducer-1:
    build:
      context: ./Reducer
    volumes:
      - ./configuration.json:/Reducer/constants/configuration.json
    ports:
      - "10001:10001"  # Assegna porte univoche ai reducer
      - "51001:51001"  # Porta univoca per servizio di HeartBeat
    environment:
      - TZ=Europe/Rome
      - REDUCER_PORT=10001
      - HB_PORT=51001
    networks:
      - my-network

   app-reducer-2:
    build:
      context: ./Reducer
    volumes:
      - ./configuration.json:/Reducer/constants/configuration.json
    ports:
      - "10002:10002"  # Assegna porte univoche ai reducer
      - "51002:51002"  # Porta univoca per servizio di HeartBeat
    environment:
      - TZ=Europe/Rome
      - REDUCER_PORT=10002
      - HB_PORT=51002
    networks:
      - my-network

networks:
  my-network:
